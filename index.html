<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Copper : Copper is a Javascript implementation of Composite Oriented Programming." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Copper</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/djupudga/Copper">View on GitHub</a>

          <h1 id="project_title">Copper</h1>
          <h2 id="project_tagline">Copper is a Javascript implementation of Composite Oriented Programming.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/djupudga/Copper/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/djupudga/Copper/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>Copper</h1>

<p>Copper is a Javascript implementation of Composite Oriented Programming.
The idea is that instead of declaring types (classes) and using
inheritance to extend those, you assemble or compose data types
from other objects or types.</p>

<p>In traditional class based languages such as Java you would do
something like this:</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"My name is "</span> <span class="o">+</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee</span> <span class="kd">extends</span> <span class="n">Person</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">employeeNumber</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">Employee</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">employeeNumber</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">employeeNmber</span> <span class="o">=</span> <span class="n">employeeNumber</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">sayNumber</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"My number is "</span> <span class="o">+</span> <span class="n">employeeNumber</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// Usage</span>
<span class="n">Person</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">"John"</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">sayName</span><span class="o">());</span> <span class="c1">// "My name is John"</span>
<span class="n">Employee</span> <span class="n">emp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">"George"</span><span class="o">,</span> <span class="mi">123</span><span class="o">);</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">emp</span><span class="o">.</span><span class="na">sayName</span><span class="o">());</span> <span class="c1">// My name is George</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">emp</span><span class="o">.</span><span class="na">sayNumber</span><span class="o">());</span> <span class="c1">// My number is 123</span>
</pre></div>

<p>Whereas in a Composite Oriented Programming system, such as Copper
you would do this:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">personBehaviour</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">sayName</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'My name is '</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">employeeBehaviour</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">sayNumber</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'My number is '</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">employeeNumber</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nx">copper</span><span class="p">.</span><span class="nx">compose</span><span class="p">({</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">'Person'</span>
    <span class="p">,</span> <span class="nx">mixins</span><span class="o">:</span> <span class="p">[</span>
        <span class="nx">personBehaviour</span>
    <span class="p">]</span>
    <span class="p">,</span> <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span>
    <span class="p">}</span>
<span class="p">})</span>
<span class="nx">copper</span><span class="p">.</span><span class="nx">compose</span><span class="p">({</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">'Employee'</span>
    <span class="p">,</span> <span class="nx">mixins</span><span class="o">:</span> <span class="p">[</span>
          <span class="nx">personBehaviour</span>
        <span class="p">,</span> <span class="nx">employeeBehaviour</span>
    <span class="p">]</span>
    <span class="p">,</span> <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">employeeNumber</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">employeeNumber</span> <span class="o">=</span> <span class="nx">employeeNumber</span>
    <span class="p">}</span>
<span class="p">})</span>
<span class="kd">var</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">copper</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'Person'</span><span class="p">,</span> <span class="s1">'John'</span><span class="p">)</span>
<span class="nx">person</span><span class="p">.</span><span class="nx">sayName</span><span class="p">()</span>                <span class="c1">// My name is John</span>
<span class="kd">var</span> <span class="nx">emp</span> <span class="o">=</span> <span class="nx">copper</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'Employee'</span><span class="p">,</span> <span class="s1">'George'</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">emp</span><span class="p">.</span><span class="nx">sayName</span><span class="p">())</span>      <span class="c1">// My name is George</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">emp</span><span class="p">.</span><span class="nx">sayNumber</span><span class="p">())</span>    <span class="c1">// My number is 123</span>
</pre></div>

<p>Instead of defining a type (a class), you define the behaviour and then
compose your objects using these behaviours.</p>

<h2>But wait! There is more!</h2>

<p>In addition to mixins, you can add traditional Aspect Oriented Programming
advices to your composed objects. Lets work the employee a little more:</p>

<div class="highlight"><pre><span class="nx">copper</span><span class="p">.</span><span class="nx">compose</span><span class="p">({</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">'Employee'</span>
    <span class="p">,</span> <span class="nx">mixins</span><span class="o">:</span> <span class="p">[</span>
          <span class="nx">personBehaviour</span>
        <span class="p">,</span> <span class="nx">employeeBehaviour</span>
    <span class="p">]</span>
    <span class="p">,</span> <span class="nx">after</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">'sayName'</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ret</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">ret</span> <span class="o">+</span> <span class="s1">' and my number is '</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">employeeNumber</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="p">,</span> <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">employeeNumber</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">employeeNumber</span> <span class="o">=</span> <span class="nx">employeeNumber</span>
    <span class="p">}</span>
<span class="p">})</span>
<span class="kd">var</span> <span class="nx">emp</span> <span class="o">=</span> <span class="nx">copper</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'Employee'</span><span class="p">,</span> <span class="s1">'George'</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">emp</span><span class="p">.</span><span class="nx">sayName</span><span class="p">())</span>      <span class="c1">// My name is George and my number is 123</span>
</pre></div>

<p>Here's what you can do with copper:</p>

<div class="highlight"><pre><span class="c1">// Create AND register</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">copper</span><span class="p">.</span><span class="nx">compose</span><span class="p">({</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">'optional name'</span>
    <span class="p">,</span> <span class="nx">mixins</span><span class="o">:</span> <span class="p">[</span><span class="nx">all</span> <span class="nx">your</span> <span class="nx">mixin</span> <span class="nx">objects</span><span class="p">]</span>
    <span class="p">,</span> <span class="nx">before</span><span class="o">:</span> <span class="p">{</span><span class="nx">method</span><span class="o">:</span> <span class="kd">function</span><span class="p">}</span>
    <span class="p">,</span> <span class="nx">after</span><span class="o">:</span> <span class="p">{</span><span class="nx">method</span><span class="o">:</span> <span class="kd">function</span><span class="p">}</span>
    <span class="p">,</span> <span class="nx">around</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">method</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">param1</span><span class="p">,</span> <span class="nx">param2</span><span class="p">,</span> <span class="nx">yield</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// Do something</span>
            <span class="nx">yield</span><span class="p">(</span><span class="nx">param1</span><span class="p">,</span> <span class="nx">param2</span><span class="p">)</span>
            <span class="c1">// Do some more</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="p">,</span> <span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Optional constructor</span>
    <span class="p">}</span>
<span class="p">})</span>
<span class="c1">// Composition without a name means that</span>
<span class="c1">// the composed object is not registered</span>
<span class="c1">// as an assembly</span>
<span class="kd">var</span> <span class="nx">composition</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">mixins</span><span class="o">:</span> <span class="p">[{</span>
        <span class="nx">hello</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s1">'Hello World'</span>
        <span class="p">}</span>
    <span class="p">}]</span>
<span class="p">}</span>
<span class="c1">// Just create using #compose</span>
<span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="nx">copper</span><span class="p">.</span><span class="nx">compose</span><span class="p">(</span><span class="nx">composition</span><span class="p">)</span> <span class="c1">// definition MINUS the name</span>
<span class="c1">// or you can use #create</span>
<span class="nx">bar</span> <span class="o">=</span> <span class="nx">copper</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">composition</span><span class="p">)</span>

<span class="c1">// Get an instance of a registered assembly</span>
<span class="kd">var</span> <span class="nx">baz</span> <span class="o">=</span> <span class="nx">copper</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'name.of.registered.assembly'</span><span class="p">)</span>

<span class="c1">// Mixin your objects on the fly</span>
<span class="nx">copper</span><span class="p">.</span><span class="nx">mixin</span><span class="p">(</span><span class="nx">baz</span><span class="p">,</span> <span class="nx">mixin1</span><span class="p">,</span> <span class="nx">mixin2</span><span class="p">)</span>

<span class="c1">// Add advices on the fly</span>
<span class="nx">copper</span><span class="p">.</span><span class="nx">before</span><span class="p">(</span><span class="nx">adviceFunction</span><span class="p">,</span> <span class="nx">baz</span><span class="p">,</span> <span class="s1">'methodName'</span><span class="p">)</span>
<span class="nx">copper</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="nx">adviceFunction</span><span class="p">,</span> <span class="nx">baz</span><span class="p">,</span> <span class="s1">'methodName'</span><span class="p">)</span>
<span class="nx">copper</span><span class="p">.</span><span class="nx">around</span><span class="p">(</span><span class="nx">adviceFunction</span><span class="p">,</span> <span class="nx">baz</span><span class="p">,</span> <span class="s1">'methodName'</span><span class="p">)</span>

</pre></div>

<p>Have fun!</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Copper maintained by <a href="https://github.com/djupudga">djupudga</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-36608545-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
